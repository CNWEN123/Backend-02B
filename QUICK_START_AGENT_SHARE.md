# 快速操作指南 - 股东/代理分享链接与专属域名

## 🚀 立即体验

### 访问地址
**系统URL**：https://3000-i9mzigr2smruxfa8tgrk9-2e77fc33.sandbox.novita.ai

### 登录凭证
- 用户名：`admin`
- 密码：`admin123`

---

## 📋 快速测试流程

### 测试1：创建代理并设置专属域名（5分钟）

1. **登录系统**
   - 访问上述URL
   - 使用 admin/admin123 登录

2. **进入代理管理**
   ```
   左侧菜单 → 层级管理 → 代理管理
   ```

3. **新增代理**
   - 点击右上角【新增代理】按钮
   - 填写基本信息：
     ```
     代理账号: testagent001
     登录密码: password123
     昵称: 测试代理
     层级: 代理（三级）
     ```
   - 滚动到底部找到【专属域名绑定】区域（橙色背景）
   - 填写专属域名：`test.agent.example.com`
   - 点击【保存】

4. **查看自动生成的邀请码**
   - 保存成功后会弹出提示，显示邀请码
   - 在代理列表中找到刚创建的代理
   - 查看"分享链接"列，可以看到8位邀请码（如：`A3B7C9D2`）

✅ **测试结果**：代理创建成功，邀请码和专属域名已设置

---

### 测试2：管理分享链接和域名（3分钟）

1. **打开分享设置弹窗**
   - 在代理列表中找到刚创建的代理
   - 点击该代理右侧的【分享设置】按钮（紫色图标）

2. **查看弹窗内容**
   弹窗分为4个区域：
   
   **区域1 - 代理信息**
   - 显示代理头像、账号、昵称、层级

   **区域2 - 注册绑定邀请码**（绿色边框）
   - 显示8位邀请码（大号monospace字体）
   - 可以点击【复制】按钮复制邀请码
   - 可以点击【重新生成】按钮（黄色）重置邀请码

   **区域3 - 专属分享链接**（蓝色边框）
   - 显示默认分享链接或自定义链接
   - 可以点击【复制】按钮复制链接
   - 可以修改为自定义链接

   **区域4 - 专属域名绑定**（橙色边框）
   - 显示已设置的专属域名
   - 显示验证状态（待验证/已验证）
   - 如果未验证，显示DNS配置说明
   - 可以点击【验证域名】按钮

3. **测试操作**
   - ✅ 复制邀请码
   - ✅ 修改分享链接为：`https://custom.example.com/register?ref=邀请码`
   - ✅ 点击【保存设置】

✅ **测试结果**：分享设置弹窗功能正常，可以管理邀请码和链接

---

### 测试3：编辑代理修改专属域名（2分钟）

1. **编辑代理**
   - 在代理列表中点击代理的【编辑】按钮（蓝色图标）

2. **修改专属域名**
   - 在编辑表单中找到【专属域名绑定】区域（橙色背景）
   - 修改专属域名为：`test2.agent.example.com`
   - 点击【保存】

3. **验证修改**
   - 再次打开该代理的【分享设置】
   - 确认专属域名已更新
   - 注意验证状态变为"待验证"

✅ **测试结果**：可以在编辑代理时修改专属域名

---

### 测试4：重新生成邀请码（1分钟）

1. **打开分享设置**
   - 点击代理的【分享设置】按钮

2. **重新生成邀请码**
   - 点击邀请码右侧的【重新生成】按钮（黄色，刷新图标）
   - 确认弹出的警告提示："原邀请码将失效"
   - 点击确认

3. **验证新邀请码**
   - 查看邀请码已更新为新的8位代码
   - 关闭弹窗，在代理列表中确认邀请码已更新

✅ **测试结果**：邀请码成功重新生成，原邀请码失效

---

### 测试5：模拟域名验证（1分钟）

1. **打开分享设置**
   - 点击代理的【分享设置】按钮

2. **查看DNS配置说明**
   - 在专属域名区域，如果状态是"待验证"
   - 会显示黄色提示框，包含DNS配置说明
   - 内容类似：
     ```
     ⚠️ 域名验证说明
     请将域名 test2.agent.example.com 的CNAME记录指向:
     3000-i9mzigr2smruxfa8tgrk9-2e77fc33.sandbox.novita.ai
     ```

3. **点击验证**
   - 点击【验证域名】按钮（绿色）
   - 系统会模拟DNS验证（当前为演示，实际生产需真实DNS检查）
   - 验证成功后，状态变更为"✅ 已验证"

✅ **测试结果**：域名验证流程正常，状态正确更新

---

## 🔍 功能验证清单

复制以下清单，在测试时逐项打勾：

```
代理创建与邀请码
[ ] 创建代理时自动生成8位邀请码
[ ] 邀请码在代理列表中正确显示
[ ] 邀请码格式正确（大写字母+数字）
[ ] 邀请码可以复制到剪贴板

专属域名设置
[ ] 新增代理时可以设置专属域名
[ ] 编辑代理时可以修改专属域名
[ ] 域名格式验证正常（有效/无效格式）
[ ] 专属域名保存成功

分享设置弹窗
[ ] 点击"分享设置"按钮弹窗打开
[ ] 弹窗显示4个区域（代理信息、邀请码、分享链接、专属域名）
[ ] 邀请码显示正确并可复制
[ ] 分享链接可自定义并保存
[ ] 专属域名显示正确
[ ] 域名验证状态显示正确

邀请码管理
[ ] 重新生成邀请码功能正常
[ ] 重新生成后邀请码立即更新
[ ] 有警告提示原邀请码将失效

域名验证
[ ] 未验证时显示DNS配置说明
[ ] 未验证时显示"验证域名"按钮
[ ] 点击验证后状态更新为"已验证"
[ ] 已验证时显示绿色✅标识

API测试（可选）
[ ] POST /api/v1/agents 创建代理成功
[ ] PUT /api/v1/agents/:id 更新代理成功
[ ] POST /api/v1/agents/:id/generate-invite-code 生成邀请码成功
[ ] POST /api/v1/agents/:id/verify-domain 验证域名成功
[ ] GET /api/v1/public/agent-by-invite/:code 验证邀请码有效性成功
```

---

## 📸 关键界面截图位置

### 截图1：代理列表 - 显示邀请码
**位置**：层级管理 → 代理管理  
**关键元素**：
- 表格中的"分享链接"列
- 邀请码显示（monospace字体）
- 复制按钮图标
- 紫色"分享设置"按钮

### 截图2：新增代理表单 - 专属域名区域
**位置**：点击"新增代理"按钮  
**关键元素**：
- 橙色背景的"专属域名绑定"区域
- "专属域名"输入框
- 提示文字："邀请码将在创建后自动生成"

### 截图3：分享设置弹窗 - 完整界面
**位置**：点击代理的"分享设置"按钮  
**关键元素**：
- 代理信息卡片（顶部灰色）
- 邀请码区域（绿色边框）
- 分享链接区域（蓝色边框）
- 专属域名区域（橙色边框）
- 底部操作按钮

### 截图4：分享设置弹窗 - 域名待验证状态
**位置**：分享设置弹窗 → 专属域名区域  
**关键元素**：
- "⏰ 待验证"黄色标识
- DNS配置说明黄色提示框
- "验证域名"绿色按钮

### 截图5：分享设置弹窗 - 域名已验证状态
**位置**：验证成功后  
**关键元素**：
- "✅ 已验证"绿色标识
- 无DNS配置说明
- 无验证按钮

---

## 🎯 测试场景建议

### 场景1：正常流程
1. 创建代理 → 自动生成邀请码
2. 设置专属域名
3. 验证域名
4. 生成分享链接
5. 模拟玩家使用邀请码注册

### 场景2：修改流程
1. 编辑已有代理
2. 修改专属域名
3. 重新生成邀请码
4. 更新分享链接

### 场景3：异常处理
1. 输入无效域名格式 → 应提示错误
2. 输入无效URL格式 → 应提示错误
3. 验证不存在的域名 → 应提示验证失败（当前为模拟验证）
4. 使用失效的邀请码 → 应提示无效

---

## 📞 需要帮助？

### 常见问题

**Q1: 邀请码在哪里查看？**  
A: 代理列表的"分享链接"列，或点击"分享设置"按钮

**Q2: 如何修改专属域名？**  
A: 三个入口都可以：新增代理表单、编辑代理表单、分享设置弹窗

**Q3: 重新生成邀请码会有什么影响？**  
A: 原邀请码立即失效，已使用该邀请码注册的用户不受影响

**Q4: 域名验证失败怎么办？**  
A: 检查DNS CNAME记录是否正确配置，等待DNS生效后重试

**Q5: 分享链接可以使用短链接吗？**  
A: 可以，只要是有效的URL格式即可

---

## 📚 完整文档

详细的功能说明、API文档和技术细节请查看：
- [完整功能文档](./AGENT_SHARE_FEATURE.md)

---

**版本**：v1.0  
**更新日期**：2024-11-30  
**系统**：Live Dealer Admin V2.1
